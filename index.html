<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Think Nube - Entrevista AI</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Estilo oficial del chat -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@n8n/chat@latest/dist/style.css" />

    <!-- Estilos personalizados similares a tu diseÃ±o -->
    <style>
      :root {
        --chat--color-primary: #6366f1;
        --chat--color-secondary: #10b981;
        --chat--color-white: #ffffff;
        --chat--color-light: #ececec;
        --chat--color-dark: #212121;

        --chat--message--bot--background: #212121;
        --chat--message--bot--color: #ececec;
        --chat--message--user--background: #2f2f2f;
        --chat--message--user--color: #ececec;

        --chat--window--width: 100%;
        --chat--window--height: 100%;
        --chat--message--font-size: 15px;
        --chat--message-line-height: 1.6;
      }

      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
        background: #212121;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      }

      #n8n-chat {
        width: 100%;
        height: 100%;
      }

      .chat-header {
        background-color: #2f2f2f;
        padding: 12px 20px;
        border-bottom: 1px solid #4a4a4a;
        display: flex;
        align-items: center;
        justify-content: space-between;
        height: 60px;
      }

      .header-left {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .header-title {
        font-size: 16px;
        font-weight: 600;
        color: #ececec;
      }

      .header-subtitle {
        font-size: 14px;
        color: #8e8ea0;
        margin-left: 8px;
      }
    </style>
  </head>
  <body>
    <!-- Header original mantenido -->
    <div class="chat-header">
      <div class="header-left">
        <div class="header-title">Think Nube</div>
        <div class="header-subtitle">Entrevista AI</div>
      </div>
    </div>

    <!-- Contenedor del chat -->
    <div id="n8n-chat"></div>

    <!-- Script de N8N chat desde CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@n8n/chat@latest/dist/embed.umd.js"></script>

    <script>
      const params = new URLSearchParams(window.location.search);
      const estudioID = params.get('ID') || 'sin-id';

      window.createChat({
        webhookUrl: 'https://agentsol.app.n8n.cloud/webhook/716ddad8-70a4-4679-8c5f-d914a53dce84/chat',
        target: '#n8n-chat',
        mode: 'fullscreen',
        chatSessionKey: 'sessionId',
        loadPreviousSession: true,
        metadata: {
          estudioID: estudioID
        },
        initialMessages: ['Â¡Hola! ðŸ‘‹ Â¿Listo para empezar la entrevista?'],
        i18n: {
          en: {
            title: 'Entrevista Think Nube',
            subtitle: 'Estoy para acompaÃ±arte en esta charla.',
            inputPlaceholder: 'EscribÃ­ tu respuesta...',
            getStarted: 'Comenzar'
          }
        },
        defaultLanguage: 'en'
      });
    </script>
  </body>
</html>
